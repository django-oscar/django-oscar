{% load currency_filters %}
{% load i18n %}
{% load stockrecord_tags %}

{% session_strategy request product as session %}

{% if product.is_group %}
    <h2 class="price_color">{% blocktrans with product.min_variant_price_incl_tax|currency as price %}From {{ price }}{% endblocktrans %}</h2>
{% else %}
    {% if session.price.exists %}
        {% if session.price.is_tax_known %}
            <h2 class="price_color">{{ session.price.incl_tax|currency }}</h2>
        {% else %}
            <h2 class="price_color">{{ session.price.excl_tax|currency }} <small>+ {% trans "tax" %}</small></h2>
        {% endif %}
    {% else %}
            <h2 class="price_color"></h2>
    {% endif %}
{% endif %}

{% if session.availability.is_available_to_buy %}
    {% if product.is_group %}
        <p class="instock availability ">
            <i class="icon-ok"></i> {% trans "Available" %}
        </p>
    {% else %}
        <p class="{{ session.availability.code }} availability ">
            <i class="icon-ok"></i> {{ session.availability.message|truncatewords:2 }}
        </p>
    {% endif %}
{% else %}
    <p class="availability outofstock">
        <i class="icon-remove"></i> {% trans "Not available" %}
    </p>
{% endif %}
