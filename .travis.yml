language: python

python:
    - '2.7'
    - '3.3'
    - '3.4'

env:
    global:
        # $TRANSIFEX_PASSWORD for oscar_bot (used in transifex.sh)
        secure: FuIlzEsGJiAwhaIRBmRNsq9eXmuzs25fX6BChknW4lDyVAySWMp0+Zps9Bd0JgfFYUG3Ip+OTmksYIoTUsG25ZJS9cq1IFt3QKUAN70YCI/4ZBLeIdICPEyxq+Km179+NeEXmBUug17RLMLxh3MWfO+RKUHK9yHIPNNpq0dNyoo=
    matrix:
        - DJANGO=Django==1.6.6
        - DJANGO=Django==1.7

matrix:
    # South does not support Python 3.x
    allow_failures:
        - env: "DJANGO=Django==1.6.6"
          python: '3.3'
        - env: "DJANGO=Django==1.6.6"
          python: '3.4'

install:
    - make install
    - easy_install $DJANGO

before_script:
    # Create testing databases for running migrations against
    - mysql -e 'CREATE DATABASE oscar_travis;'
    - psql -c 'CREATE DATABASE oscar_travis;' -U postgres
    #Â Create database for building demo site
    - psql -c 'CREATE DATABASE oscar_demo;' -U postgres
    - psql -c 'CREATE EXTENSION postgis; CREATE EXTENSION postgis_topology;' -U postgres -d oscar_demo

script:
    - make travis

after_success:
    - coveralls
    # TODO: Re-enable once 0.8 final is released
    # - ./transifex.sh
